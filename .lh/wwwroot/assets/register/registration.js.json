{
    "sourceFile": "wwwroot/assets/register/registration.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1653390351327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1653390351327,
            "name": "Commit-0",
            "content": "var existError = false;\r\nvar charsError = false;\r\nvar secondPasswordError = false\r\nvar emptyPasswordError = false\r\nvar emptyUserNameError = false\r\nvar displayNameError = false\r\nvar passwordLength = false\r\n\r\nwindow.addEventListener(\"load\",(event)=>{\r\n    document.getElementById(\"ProfileImage\").addEventListener(\"change\",function (){\r\n        const reader = new FileReader();\r\n        reader.addEventListener(\"load\",()=>{\r\n        localStorage.setItem(\"recent-image\", reader.result);\r\n        document.getElementById(\"ProfileImageText\").value = reader.result;\r\n        })\r\n        reader.readAsDataURL(this.files[0]);\r\n    })\r\n})\r\n\r\nfunction register () {\r\n  \r\n    var canRegister = true;\r\n  \r\n    var userName = document.getElementById(\"UserId\").value;\r\n    var password = document.getElementById(\"Password\").value;\r\n    var displayName = document.getElementById(\"DisplayName\").value;\r\n    function containsNumber(str) {\r\n        return /[0-9]/.test(str);\r\n    }\r\n    function containLetters(str) {\r\n        return (/[a-z]/.test(str) || /[A-Z]/.test(str));\r\n    }\r\n\r\n\r\n//Password less than 8 characters\r\n    if(password != \"\" && password.length <8) {\r\n        canRegister = false;\r\n        if (!passwordLength) {\r\n            document.getElementById(\"passwordLength\").style.display = \"block\"\r\n            passwordLength = true;\r\n        }\r\n    }\r\n    else {\r\n        passwordLength = false\r\n        document.getElementById(\"passwordLength\").style.display = \"none\"\r\n    }\r\n\r\n// password contain_chars_numbers\r\n    if (!(containLetters(password) && containsNumber(password)) && password != \"\") {\r\n        canRegister = false;\r\n        if (!charsError) {\r\n            document.getElementById(\"charsError\").style.display = \"block\"\r\n            charsError = true;\r\n        }\r\n    }\r\n    else{\r\n        charsError = false\r\n        document.getElementById(\"charsError\").style.display = \"none\";\r\n    }\r\n\r\n//confirm password\r\n    if (document.getElementById(\"confirmpassword\").value != password) {\r\n        canRegister = false;\r\n        if (!secondPasswordError) {\r\n            document.getElementById(\"confirmError\").style.display = \"block\"\r\n            secondPasswordError = true;\r\n        }\r\n    }\r\n    else{\r\n        secondPasswordError = false\r\n        document.getElementById(\"confirmError\").style.display = \"none\";\r\n    }\r\n\r\n//display name is empty\r\n    if (displayName == \"\") {\r\n        canRegister = false;\r\n        if (!displayNameError) {\r\n            document.getElementById(\"displayNameError\").style.display = \"block\"\r\n            displayNameError = true;\r\n        }\r\n    }\r\n    else{\r\n        displayNameError = false\r\n        document.getElementById(\"displayNameError\").style.display = \"none\";\r\n    }\r\n\r\n//add the user\r\n    if (canRegister) {\r\n        //if the user didnt add photo - default photo\r\n        if( document.getElementById(\"img\").files.length == 0 ) {\r\n            localStorage.setItem(\"new_user\", JSON.stringify({\r\n                password: password,\r\n                profile: \"https://www.enduresc.com.au/wordpress/wp-content/uploads/2018/05/user-profile.jpg\",\r\n                chats: [],\r\n                displayName: document.getElementById(\"name\").value\r\n            }));\r\n        }\r\n        else{\r\n            localStorage.setItem(\"new_user\", JSON.stringify({\r\n                password: password,\r\n                profile: localStorage.getItem(\"recent-image\"),\r\n                chats: [],\r\n                displayName: document.getElementById(\"name\").value\r\n            }));\r\n        }\r\n        window.location.replace(`chat.html?${userName}`);\r\n        };\r\n}  "
        }
    ]
}